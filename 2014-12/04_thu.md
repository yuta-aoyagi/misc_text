昨日は「Struct.newがブロックをとるのはドキュメントされてないアレげ（）な挙動だ！」って言ったわけだけど。
[Struct.newのドキュメント](http://docs.ruby-lang.org/ja/1.8.7/method/Struct/s/=5b=5d.html)の下のほうあった

> \[SEE_ALSO\] [Class.new](http://docs.ruby-lang.org/ja/1.8.7/method/Class/s/new.html)

って記述に気がついた。
読んでみればわかるけど、Class.newはブロックをとって新しいクラスのコンテキストで実行してくれるらしい。
Struct.newはまさに新しいクラスを作るわけだから、この挙動のほうが一貫していると言えばしていると言えるのかな。

いずれにしても「そういう挙動するならドキュメントに書いてよ！」ってのが俺の意見。
(1)ドキュメントにない挙動に依存せずに(2)大した苦労もなく、欲しい結果が得られるから`class MyStruct < Struct.new(:val)`のスタイルで今後も書くことに決めたわ。

---

今日はもうちょっと違うことをやってたけど、アウトプットをまとめる時間がないのでこういう適当な記事でお茶を濁すでござる。
ではまた明日。
