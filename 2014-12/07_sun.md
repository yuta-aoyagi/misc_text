最近書いたワンライナー
======================

今日のテーマはワンライナー。
窓何とかってOSのcmd.exeで動かしてるのでシェルエスケープ足りてないのは仕様です。
cmd.exeは特殊記号があまり定義されてないのに依存して、ダブルクォートを不要にする書き方してたりする。

---

    ruby -e t=Time.now;p(t,26*86400/(t-Time.local(2014,11,24,22,22,16,90000)))

見た目通りの時刻に立ったスレがレス数26で見事に過疎ってるので、勢い(レス数÷スレ立てからの経過時間\[単位は日\])の値を計算してﾆﾖﾆﾖしてる。
出力の1行目は現在時刻、2行目が勢いの値。
Dateオブジェクト同士の差は時間差が秒単位で得られるので、変換定数86400\[秒/日\]をかけるだけの簡単なお仕事。

    ruby -e p(Time.local(2014,11,24,22,22,16,90000)+86400*26/2.0)

これは逆に、勢いが2.0(この数値は適当に書き換えて使う)になる時刻を出力する。
こいつを利用して、Webで見る勢いの値は、上の式と同じ計算を数秒以内の誤差で使い、小数第2位以下を切り捨てていることが分かった。

---

    ruby -e t=Time.now;p(t,Time.local(2014,11,16,16,0)+1.1*(t-Time.local(2014,12,7,17,36)))

しばらく前から数週間遅れのTLを読んではRTを垂れ流してるわけだけど、経過時間より長い時間分のTLを読まなければ永遠に現在に追いつけないのは明らか。
そこで、TL読みを中断するたびにその時点の時刻と読んでいたTLの時刻を記録して、次に読むときは経過時間の1.1倍以上を読むことにしている。
このワンライナーは1行目に現在時刻を、2行目に1.1倍経過させた時刻を出力する。

---

なんだかんだ1週間書き続けてることになる。
12月入って1週間の進捗って……考えないことにしよう。
